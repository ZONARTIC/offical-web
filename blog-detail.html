<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog Post - Artoon Games</title>
  <meta name="description" content="Read the full article">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="header-container">
      <div class="logo" onclick="window.location.href='index.html'">
        <img src="images/logo.png" alt="Zonaric Logo" />
      </div>
      
      <button class="menu-toggle" onclick="toggleMenu(event)" aria-label="Toggle menu" aria-expanded="false">‚ò∞</button>
      
      <div class="nav-wrapper">
        <nav class="nav-menu">
          <ul>
            <li><a href="index.html">HOME</a></li>
            <li><a href="blog.html" class="active">BLOG</a></li>
            <li><a href="mobile-games.html">MOBILE GAMES</a></li>
            <li><a href="test-games.html">TEST GAMES</a></li>
            <li><a href="about.html">ABOUT US</a></li>
            <li><a href="contact.html">CONTACT US</a></li>
          </ul>
          <div class="social-icons">
            <a href="https://facebook.com" target="_blank" rel="noopener noreferrer">
              <img src="images/facebook.png" alt="Facebook" />
            </a>
            <a href="https://instagram.com" target="_blank" rel="noopener noreferrer">
              <img src="images/instagram.png" alt="Instagram" />
            </a>
            <a href="https://twitter.com" target="_blank" rel="noopener noreferrer">
              <img src="images/twitter.png" alt="Twitter" />
            </a>
            <a href="https://youtube.com" target="_blank" rel="noopener noreferrer">
              <img src="images/youtube.png" alt="YouTube" />
            </a>
          </div>
        </nav>
      </div>
    </div>
  </header>
  
  <!-- MAIN CONTENT -->
  <main>
    <section class="blog-detail-section">
      <!-- Back Button -->
      <div class="blog-detail-back">
        <button onclick="window.location.href='blog.html'" class="back-button">
          ‚Üê Back to Blog
        </button>
      </div>
      
      <!-- Blog Post Content -->
      <article id="blog-post-content" class="blog-detail-article">
        <div class="blog-detail-loading">
          <p>Loading post...</p>
        </div>
      </article>
      
      <!-- Post Not Found -->
      <div id="post-not-found" class="post-not-found" style="display: none;">
        <h2>üìù Post Not Found</h2>
        <p>The blog post you're looking for doesn't exist.</p>
        <button onclick="window.location.href='blog.html'" class="back-button">
          ‚Üê Back to Blog
        </button>
      </div>
    </section>
  </main>
  
  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 Zonartic Games. All rights reserved.</p>
  </footer>
  
  <!-- Floating Contact Button -->
  <a href="contact.html" class="floating-contact" aria-label="Contact Us">
    <img src="images/contact-icon.png" alt="Contact" />
  </a>
  
  <!-- JavaScript -->
  <script>
    // ==========================================
    // LOAD BLOG POST DETAIL FROM JSON
    // ==========================================
    let blogPosts = [];
    
    async function loadBlogPostDetail() {
      try {
        const response = await fetch('data/blogs.json');
        blogPosts = await response.json();
        
        // L·∫•y post ID t·ª´ URL
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');
        
        if (!postId) {
          showPostNotFound();
          return;
        }
        
        // T√¨m post theo ID
        const post = blogPosts.find(p => p.id === postId);
        
        if (!post || !post.isPublished) {
          showPostNotFound();
          return;
        }
        
        renderBlogPost(post);
      } catch (error) {
        console.log('Could not load blog post:', error);
        showPostNotFound();
      }
    }
    
    // ==========================================
    // RENDER BLOG POST
    // ==========================================
    function renderBlogPost(post) {
      const contentContainer = document.getElementById('blog-post-content');
      
      contentContainer.innerHTML = `
        <div class="blog-detail-header">
          <div class="blog-detail-category">${post.category}</div>
          <h1 class="blog-detail-title">${post.title}</h1>
          <div class="blog-detail-meta">
            <span class="blog-detail-date">üìÖ ${post.date}</span>
            <span class="blog-detail-author">‚úçÔ∏è ${post.author}</span>
          </div>
        </div>
        
        <div class="blog-detail-image">
          <img src="${post.image}" alt="${post.title}" loading="lazy" />
        </div>
        
        <div class="blog-detail-content">
          ${post.content}
        </div>
        
        <div class="blog-detail-footer">
          <button onclick="window.location.href='blog.html'" class="back-button">
            ‚Üê Back to Blog
          </button>
          <div class="blog-detail-share">
            <span>Share:</span>
            <a href="https://facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}" target="_blank">Facebook</a>
            <a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(post.title)}" target="_blank">Twitter</a>
          </div>
        </div>
      `;
      
      // Update page title
      document.title = `${post.title} - Artoon Games`;
    }
    
    // ==========================================
    // SHOW POST NOT FOUND
    // ==========================================
    function showPostNotFound() {
      const contentContainer = document.getElementById('blog-post-content');
      const notFoundContainer = document.getElementById('post-not-found');
      
      contentContainer.style.display = 'none';
      notFoundContainer.style.display = 'block';
    }
    
    // ==========================================
    // Mobile Menu Toggle
    // ==========================================
    function toggleMenu(event) {
      if (event) {
        event.preventDefault();
        event.stopPropagation();
      }
      
      setTimeout(function() {
        const navWrapper = document.querySelector('.nav-wrapper');
        const menuToggle = document.querySelector('.menu-toggle');
        
        if (!navWrapper || !menuToggle) return;
        
        navWrapper.classList.toggle('show');
        
        if (navWrapper.classList.contains('show')) {
          menuToggle.innerHTML = '‚úï';
          menuToggle.setAttribute('aria-expanded', 'true');
        } else {
          menuToggle.innerHTML = '‚ò∞';
          menuToggle.setAttribute('aria-expanded', 'false');
        }
      }, 50);
    }
    
    document.addEventListener('click', function(event) {
      if (window.innerWidth <= 768) {
        setTimeout(function() {
          const navWrapper = document.querySelector('.nav-wrapper');
          const menuToggle = document.querySelector('.menu-toggle');
          const header = document.querySelector('header');
          
          if (!navWrapper || !menuToggle || !header) return;
          
          if (!header.contains(event.target) && navWrapper.classList.contains('show')) {
            navWrapper.classList.remove('show');
            menuToggle.innerHTML = '‚ò∞';
            menuToggle.setAttribute('aria-expanded', 'false');
          }
        }, 50);
      }
    });
    
    document.addEventListener('DOMContentLoaded', function() {
      document.body.addEventListener('click', function(event) {
        if (window.innerWidth <= 768) {
          const target = event.target.closest('.nav-menu a');
          
          if (target) {
            setTimeout(function() {
              const navWrapper = document.querySelector('.nav-wrapper');
              const menuToggle = document.querySelector('.menu-toggle');
              
              if (!navWrapper || !menuToggle) return;
              
              navWrapper.classList.remove('show');
              menuToggle.innerHTML = '‚ò∞';
              menuToggle.setAttribute('aria-expanded', 'false');
            }, 100);
          }
        }
      });
      
      // Load blog post detail
      loadBlogPostDetail();
    });
    
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function() {
        const navWrapper = document.querySelector('.nav-wrapper');
        const menuToggle = document.querySelector('.menu-toggle');
        
        if (!navWrapper || !menuToggle) return;
        
        if (window.innerWidth > 768) {
          navWrapper.classList.remove('show');
          menuToggle.innerHTML = '‚ò∞';
          menuToggle.setAttribute('aria-expanded', 'false');
        }
      }, 100);
    });
    
    if (typeof MutationObserver !== 'undefined') {
      const observer = new MutationObserver(function(mutations) {
        const menuToggle = document.querySelector('.menu-toggle');
        if (menuToggle && !menuToggle.hasAttribute('data-listener-attached')) {
          menuToggle.setAttribute('data-listener-attached', 'true');
        }
      });
      
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    }
  </script>
</body>
</html>
